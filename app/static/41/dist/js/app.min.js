"use strict";!function(a){function n(){a(window).width()<768?(a(".footer__menu .has-dropdown").on("click",function(){a(this).toggleClass("arrow-down"),a(".arrow-down .toggle-menu").slideToggle("slow")}),a(".footer__menu .has-dropdown").on("click",function(e){e.preventDefault();var t=a(this).find(".sub-menu");t.hasClass("show")?t.removeClass("show"):(t.parent().find(".sub-menu").removeClass("show"),t.toggleClass("show"))})):(a(".footer__menu .has-dropdown").off("click"),a(".footer__menu .has-dropdown").off("click"))}function s(e){e.value.trim()&&(iti.isValidNumber()?(e.parentElement.parentElement.classList.remove("has-error"),e.parentElement.parentElement.classList.add("has-success"),e.parentElement.removeAttribute("id")):(e.parentElement.parentElement.classList.remove("has-success"),e.parentElement.parentElement.classList.add("has-error"),e.parentElement.setAttribute("id","phone-no-success")))}a(document).ready(function(){var t=document.querySelector("#phone"),e=document.querySelector("#country");window.iti=window.intlTelInput(t,{utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/8.4.6/js/utils.js"}),e.value=iti.getSelectedCountryData().name.replace(/\s*\(.*?\)\s*/g,""),t.addEventListener("countrychange",function(){e.value=iti.getSelectedCountryData().name.replace(/\s*\(.*?\)\s*/g,""),s(t)}),t.addEventListener("input",function(e){s(t)}),a(".mobile-app-guide11").length&&(a(".js-thx__link").attr("href","https://www.intellectsoft.net/blog/wp-content/uploads/Engagement-Models-_-Ebook-_-Jan-2021.pdf"),a(".js-thx__image").prepend('<img src="https://www.intellectsoft.net/blog/wp-content/uploads/book-mockup-1-2.png" alt="">')),n(),a(".main-header").on("click",".main-btn",function(e){e.preventDefault();var t=a(this).attr("href"),n=a(t).offset().top;a("body,html").animate({scrollTop:n},1500)})}),a(window).resize(function(){n()})}(jQuery),window.onload=function(){$.validator.addMethod("englishsonly",function(e,t){return this.optional(t)||/^[a-z ]+$/i.test(e)},"Only latin letters are allowed."),$.validator.addMethod("itivalidnumber",function(e,t){return iti.isValidNumber()},"Invalid number."),$(".contact-form form").each(function(){$(this).validate({errorClass:"has-error",validClass:"has-success",showErrors:function(e){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},highlight:function(e,t,n){$(e).parent().addClass(t).removeClass(n)},unhighlight:function(e,t,n){$(e).parent().removeClass(t).addClass(n)},rules:{name:{required:!0,englishsonly:!0,maxlength:255},last_name:{required:!0,englishsonly:!0,maxlength:255},phone:{required:!0,itivalidnumber:!0},company:{required:!0,englishsonly:!0,maxlength:255},country:{required:!0},size:{required:!0},position:{required:!0},email:{required:{depends:function(){return $(this).val($.trim($(this).val())),!0}},email:!0,maxlength:255}},messages:{email:{email:"Please use your corporate email",required:!1},phone:!1,country:!1,size:!1,company:!1,last_name:!1,name:!1,position:!1},submitHandler:function(e,t){var n=this;t.preventDefault();var a=new FormData(e),s=new XMLHttpRequest,o={submittedAt:(new Date).getTime(),fields:[{name:"firstname",value:a.get("name")},{name:"lastname",value:a.get("last_name")},{name:"email",value:a.get("email")},{name:"phone",value:a.get("phone")},{name:"company",value:a.get("company")},{name:"jobtitle",value:a.get("position")},{name:"numemployees",value:a.get("size")},{name:"country",value:a.get("country")}],context:{pageUri:"https://www.intellectsoft.net/l/41/engagement-models-billing-plans",pageName:"Core Engagement Models & Billing Plans for IT Outsourcing"}},r=JSON.stringify(o),i=document.querySelector(".contact-form .success");s.open("POST","https://api.hsforms.com/submissions/v3/integration/submit/20037848/b28bc4af-209e-468e-95a8-4a29c2154246"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){4==s.readyState&&200==s.status?(window.dataLayer.push({event:"EbookDownload"}),e.classList.add("hidden"),i.classList.remove("hidden")):4==s.readyState&&400==s.status?(JSON.parse(s.response).errors.forEach(function(e){"INVALID_EMAIL"!=e.errorType&&"BLOCKED_EMAIL"!=e.errorType||n.showErrors({email:"Please use your corporate email"})}),console.log(JSON.parse(s.response).errors)):(4==s.readyState&&403==s.status||4==s.readyState&&404==s.status)&&console.log(JSON.parse(s.response).errors)},s.send(r)}})})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIm9uUmVzaXplIiwid2luZG93Iiwid2lkdGgiLCJvbiIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsInNsaWRlVG9nZ2xlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiJHRoaXMiLCJmaW5kIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInBhcmVudCIsIm9mZiIsInZhbGlkYXRlSW5wdXQiLCJpbnB1dCIsInZhbHVlIiwidHJpbSIsIml0aSIsImlzVmFsaWROdW1iZXIiLCJwYXJlbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiZG9jdW1lbnQiLCJyZWFkeSIsInF1ZXJ5U2VsZWN0b3IiLCJjb3VudHJ5IiwiaW50bFRlbElucHV0IiwidXRpbHNTY3JpcHQiLCJnZXRTZWxlY3RlZENvdW50cnlEYXRhIiwibmFtZSIsInJlcGxhY2UiLCJhZGRFdmVudExpc3RlbmVyIiwibGVuZ3RoIiwiYXR0ciIsInByZXBlbmQiLCJldmVudCIsImlkIiwidG9wIiwib2Zmc2V0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInJlc2l6ZSIsImpRdWVyeSIsIm9ubG9hZCIsInZhbGlkYXRvciIsImFkZE1ldGhvZCIsImVsZW1lbnQiLCJvcHRpb25hbCIsInRlc3QiLCJlYWNoIiwidmFsaWRhdGUiLCJlcnJvckNsYXNzIiwidmFsaWRDbGFzcyIsInNob3dFcnJvcnMiLCJlcnJvck1hcCIsIk5vdGlmeSIsInVwbG9hZEVycm9yTWVzc2FnZSIsIm5vdGlmeURlbGF5IiwiZGVmYXVsdFNob3dFcnJvcnMiLCJoaWdobGlnaHQiLCJlbGVtIiwiYWRkQ2xhc3MiLCJ1bmhpZ2hsaWdodCIsInJ1bGVzIiwicmVxdWlyZWQiLCJlbmdsaXNoc29ubHkiLCJtYXhsZW5ndGgiLCJsYXN0X25hbWUiLCJwaG9uZSIsIml0aXZhbGlkbnVtYmVyIiwiY29tcGFueSIsInNpemUiLCJwb3NpdGlvbiIsImVtYWlsIiwiZGVwZW5kcyIsInZhbCIsIm1lc3NhZ2VzIiwic3VibWl0SGFuZGxlciIsImZvcm0iLCJ0dGhpcyIsInJvd0RhdGEiLCJGb3JtRGF0YSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiZGF0YSIsInN1Ym1pdHRlZEF0IiwiRGF0ZSIsImdldFRpbWUiLCJmaWVsZHMiLCJnZXQiLCJjb250ZXh0IiwicGFnZVVyaSIsInBhZ2VOYW1lIiwiZmluYWxfZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzTWVzc2FnZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImRhdGFMYXllciIsInB1c2giLCJwYXJzZSIsInJlc3BvbnNlIiwiZXJyb3JzIiwiZm9yRWFjaCIsImVudHJ5IiwiZXJyb3JUeXBlIiwiY29uc29sZSIsImxvZyIsInNlbmQiXSwibWFwcGluZ3MiOiJjQUdBLFNBQUFBLEdBRUEsU0FBQUMsSUFDQUQsRUFBQUUsUUFBQUMsUUFBQSxLQUNBSCxFQUFBLCtCQUFBSSxHQUFBLFFBQUEsV0FDQUosRUFBQUssTUFBQUMsWUFBQSxjQUNBTixFQUFBLDRCQUFBTyxZQUFBLFVBR0FQLEVBQUEsK0JBQUFJLEdBQUEsUUFBQSxTQUFBSSxHQUNBQSxFQUFBQyxpQkFFQSxJQUFBQyxFQUFBVixFQUFBSyxNQUFBTSxLQUFBLGFBRUFELEVBQUFFLFNBQUEsUUFDQUYsRUFBQUcsWUFBQSxTQUVBSCxFQUFBSSxTQUFBSCxLQUFBLGFBQUFFLFlBQUEsUUFDQUgsRUFBQUosWUFBQSxhQUlBTixFQUFBLCtCQUFBZSxJQUFBLFNBQ0FmLEVBQUEsK0JBQUFlLElBQUEsVUFnQ0EsU0FBQUMsRUFBQUMsR0FDQUEsRUFBQUMsTUFBQUMsU0FDQUMsSUFBQUMsaUJBQ0FKLEVBQUFLLGNBQUFBLGNBQUFDLFVBQUFDLE9BQUEsYUFDQVAsRUFBQUssY0FBQUEsY0FBQUMsVUFBQUUsSUFBQSxlQUNBUixFQUFBSyxjQUFBSSxn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RUFBQW1CLFNBREFTLFFBQUFDLElBQUFqQixLQUFBVSxNQUFBdEIsRUFBQXVCLFVBQUFDLFNBTUF4QixFQUFBOEIsS0FBQW5CIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbjtcbihmdW5jdGlvbiAoJCkge1xuXG4gIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgJCgnLmZvb3Rlcl9fbWVudSAuaGFzLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhcnJvdy1kb3duJyk7XG4gICAgICAgICQoJy5hcnJvdy1kb3duIC50b2dnbGUtbWVudScpLnNsaWRlVG9nZ2xlKCdzbG93Jyk7XG4gICAgICB9KTtcblxuICAgICAgJCgnLmZvb3Rlcl9fbWVudSAuaGFzLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcykuZmluZCgnLnN1Yi1tZW51Jyk7XG5cbiAgICAgICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJy5zdWItbWVudScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5mb290ZXJfX21lbnUgLmhhcy1kcm9wZG93bicpLm9mZignY2xpY2snKTtcbiAgICAgICQoJy5mb290ZXJfX21lbnUgLmhhcy1kcm9wZG93bicpLm9mZignY2xpY2snKTtcbiAgICB9XG4gIH1cblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG9uZVwiKTtcbiAgICB2YXIgY291bnRyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY291bnRyeVwiKTtcbiAgICB3aW5kb3cuaXRpID0gd2luZG93LmludGxUZWxJbnB1dChpbnB1dCwge1xuICAgICAgdXRpbHNTY3JpcHQ6IFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaW50bC10ZWwtaW5wdXQvOC40LjYvanMvdXRpbHMuanNcIlxuICAgIH0pO1xuICAgIGNvdW50cnkudmFsdWUgPSBpdGkuZ2V0U2VsZWN0ZWRDb3VudHJ5RGF0YSgpLm5hbWUucmVwbGFjZSgvXFxzKlxcKC4qP1xcKVxccyovZywgJycpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjb3VudHJ5Y2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvdW50cnkudmFsdWUgPSBpdGkuZ2V0U2VsZWN0ZWRDb3VudHJ5RGF0YSgpLm5hbWUucmVwbGFjZSgvXFxzKlxcKC4qP1xcKVxccyovZywgJycpO1xuICAgICAgdmFsaWRhdGVJbnB1dChpbnB1dCk7XG4gICAgfSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFsaWRhdGVJbnB1dChpbnB1dCk7XG4gICAgfSk7XG5cbiAgICBpZiAoJCgnLm1vYmlsZS1hcHAtZ3VpZGUxMScpLmxlbmd0aCkge1xuICAgICAgJCgnLmpzLXRoeF9fbGluaycpLmF0dHIoXCJocmVmXCIsIFwiaHR0cHM6Ly93d3cuaW50ZWxsZWN0c29mdC5uZXQvYmxvZy93cC1jb250ZW50L3VwbG9hZHMvRW5nYWdlbWVudC1Nb2RlbHMtXy1FYm9vay1fLUphbi0yMDIxLnBkZlwiKTtcbiAgICAgICQoJy5qcy10aHhfX2ltYWdlJykucHJlcGVuZCgnPGltZyBzcmM9XCJodHRwczovL3d3dy5pbnRlbGxlY3Rzb2Z0Lm5ldC9ibG9nL3dwLWNvbnRlbnQvdXBsb2Fkcy9ib29rLW1vY2t1cC0xLTIucG5nXCIgYWx0PVwiXCI+Jyk7XG4gICAgfVxuICAgIG9uUmVzaXplKCk7XG4gICAgJChcIi5tYWluLWhlYWRlclwiKS5vbihcImNsaWNrXCIsIFwiLm1haW4tYnRuXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBpZCA9ICQodGhpcykuYXR0cignaHJlZicpLFxuICAgICAgICAgIHRvcCA9ICQoaWQpLm9mZnNldCgpLnRvcDtcbiAgICAgICQoJ2JvZHksaHRtbCcpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IHRvcCB9LCAxNTAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dChpbnB1dCkge1xuICAgIGlmIChpbnB1dC52YWx1ZS50cmltKCkpIHtcbiAgICAgIGlmIChpdGkuaXNWYWxpZE51bWJlcigpKSB7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGFzLWVycm9yXCIpO1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhhcy1zdWNjZXNzXCIpO1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGFzLXN1Y2Nlc3NcIik7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGFzLWVycm9yXCIpO1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCAncGhvbmUtbm8tc3VjY2VzcycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgIG9uUmVzaXplKCk7XG4gIH0pO1xufSkoalF1ZXJ5KTtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZW5nbGlzaHNvbmx5XCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eW2EteiBdKyQvaS50ZXN0KHZhbHVlKTtcbiAgfSwgXCJPbmx5IGxhdGluIGxldHRlcnMgYXJlIGFsbG93ZWQuXCIpO1xuXG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcIml0aXZhbGlkbnVtYmVyXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHJldHVybiBpdGkuaXNWYWxpZE51bWJlcigpO1xuICB9LCBcIkludmFsaWQgbnVtYmVyLlwiKTtcblxuICAkKCcuY29udGFjdC1mb3JtIGZvcm0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnZhbGlkYXRlKHtcbiAgICAgIGVycm9yQ2xhc3M6ICdoYXMtZXJyb3InLFxuICAgICAgdmFsaWRDbGFzczogJ2hhcy1zdWNjZXNzJyxcbiAgICAgIHNob3dFcnJvcnM6IGZ1bmN0aW9uIHNob3dFcnJvcnMoZXJyb3JNYXApIHtcbiAgICAgICAgaWYgKGVycm9yTWFwWydhdHRhY2gnXSkgTm90aWZ5KHVwbG9hZEVycm9yTWVzc2FnZSwgbm90aWZ5RGVsYXkpO1xuICAgICAgICB0aGlzLmRlZmF1bHRTaG93RXJyb3JzKCk7XG4gICAgICB9LFxuICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQoZWxlbSwgZXJyb3JDbGFzcywgdmFsaWRDbGFzcykge1xuICAgICAgICAkKGVsZW0pLnBhcmVudCgpLmFkZENsYXNzKGVycm9yQ2xhc3MpLnJlbW92ZUNsYXNzKHZhbGlkQ2xhc3MpO1xuICAgICAgfSxcbiAgICAgIHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiB1bmhpZ2hsaWdodChlbGVtLCBlcnJvckNsYXNzLCB2YWxpZENsYXNzKSB7XG4gICAgICAgICQoZWxlbSkucGFyZW50KCkucmVtb3ZlQ2xhc3MoZXJyb3JDbGFzcykuYWRkQ2xhc3ModmFsaWRDbGFzcyk7XG4gICAgICB9LFxuICAgICAgcnVsZXM6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGVuZ2xpc2hzb25seTogdHJ1ZSxcbiAgICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgICB9LFxuICAgICAgICBsYXN0X25hbWU6IHtcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBlbmdsaXNoc29ubHk6IHRydWUsXG4gICAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgICAgfSxcbiAgICAgICAgcGhvbmU6IHtcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBpdGl2YWxpZG51bWJlcjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjb21wYW55OiB7XG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZW5nbGlzaHNvbmx5OiB0cnVlLFxuICAgICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50cnk6IHtcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBzaXplOiB7XG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIHJlcXVpcmVkOiB7XG4gICAgICAgICAgICBkZXBlbmRzOiBmdW5jdGlvbiBkZXBlbmRzKCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgkLnRyaW0oJCh0aGlzKS52YWwoKSkpO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIGVtYWlsOiAnUGxlYXNlIHVzZSB5b3VyIGNvcnBvcmF0ZSBlbWFpbCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHBob25lOiBmYWxzZSxcbiAgICAgICAgY291bnRyeTogZmFsc2UsXG4gICAgICAgIHNpemU6IGZhbHNlLFxuICAgICAgICBjb21wYW55OiBmYWxzZSxcbiAgICAgICAgbGFzdF9uYW1lOiBmYWxzZSxcbiAgICAgICAgbmFtZTogZmFsc2UsXG4gICAgICAgIHBvc2l0aW9uOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoZm9ybSwgZXZlbnQpIHtcbiAgICAgICAgdmFyIHR0aGlzID0gdGhpcztcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHJvd0RhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IHJlcXVlc3RcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAvLyBFeGFtcGxlIHJlcXVlc3QgSlNPTjpcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgXCJzdWJtaXR0ZWRBdFwiOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICBcImZpZWxkc1wiOiBbe1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiZmlyc3RuYW1lXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHJvd0RhdGEuZ2V0KCduYW1lJylcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJsYXN0bmFtZVwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnbGFzdF9uYW1lJylcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJlbWFpbFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnZW1haWwnKVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcInBob25lXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHJvd0RhdGEuZ2V0KCdwaG9uZScpXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiY29tcGFueVwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnY29tcGFueScpXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiam9idGl0bGVcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogcm93RGF0YS5nZXQoJ3Bvc2l0aW9uJylcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJudW1lbXBsb3llZXNcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogcm93RGF0YS5nZXQoJ3NpemUnKVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcImNvdW50cnlcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogcm93RGF0YS5nZXQoJ2NvdW50cnknKVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIFwiY29udGV4dFwiOiB7XG4gICAgICAgICAgICBcInBhZ2VVcmlcIjogXCJodHRwczovL3d3dy5pbnRlbGxlY3Rzb2Z0Lm5ldC9sLzQxL2VuZ2FnZW1lbnQtbW9kZWxzLWJpbGxpbmctcGxhbnNcIixcbiAgICAgICAgICAgIFwicGFnZU5hbWVcIjogXCJDb3JlIEVuZ2FnZW1lbnQgTW9kZWxzICYgQmlsbGluZyBQbGFucyBmb3IgSVQgT3V0c291cmNpbmdcIlxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZpbmFsX2RhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3QtZm9ybSAuc3VjY2VzcycpO1xuICAgICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL2FwaS5oc2Zvcm1zLmNvbS9zdWJtaXNzaW9ucy92My9pbnRlZ3JhdGlvbi9zdWJtaXQvMjAwMzc4NDgvYjI4YmM0YWYtMjA5ZS00NjhlLTk1YTgtNGEyOWMyMTU0MjQ2Jyk7XG4gICAgICAgIC8vIFNldHMgdGhlIHZhbHVlIG9mIHRoZSAnQ29udGVudC1UeXBlJyBIVFRQIHJlcXVlc3QgaGVhZGVycyB0byAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgIC8vIFJldHVybnMgYSAyMDAgcmVzcG9uc2UgaWYgdGhlIHN1Ym1pc3Npb24gaXMgc3VjY2Vzc2Z1bC5cbiAgICAgICAgICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaCh7ICdldmVudCc6ICdFYm9va0Rvd25sb2FkJyB9KTtcbiAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSA0MDApIHtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSkuZXJyb3JzOyAvLyBSZXR1cm5zIGEgNDAwIGVycm9yIHRoZSBzdWJtaXNzaW9uIGlzIHJlamVjdGVkLlxuICAgICAgICAgICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgIGlmIChlbnRyeS5lcnJvclR5cGUgPT0gXCJJTlZBTElEX0VNQUlMXCIgfHwgZW50cnkuZXJyb3JUeXBlID09IFwiQkxPQ0tFRF9FTUFJTFwiKSB7XG4gICAgICAgICAgICAgICAgdHRoaXMuc2hvd0Vycm9ycyh7ICdlbWFpbCc6ICdQbGVhc2UgdXNlIHlvdXIgY29ycG9yYXRlIGVtYWlsJyB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHhoci5yZXNwb25zZSkuZXJyb3JzKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSA0MDMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKS5lcnJvcnMpOyAvLyBSZXR1cm5zIGEgNDAzIGVycm9yIGlmIHRoZSBwb3J0YWwgaXNuJ3QgYWxsb3dlZCB0byBwb3N0IHN1Ym1pc3Npb25zLlxuICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDQwNCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpLmVycm9ycyk7IC8vUmV0dXJucyBhIDQwNCBlcnJvciBpZiB0aGUgZm9ybUd1aWQgaXNuJ3QgZm91bmRcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNlbmRzIHRoZSByZXF1ZXN0XG4gICAgICAgIHhoci5zZW5kKGZpbmFsX2RhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07Il19
