"use strict";!function(o){function n(){o(window).width()<768?(o(".footer__menu .has-dropdown").on("click",function(){o(this).toggleClass("arrow-down"),o(".arrow-down .toggle-menu").slideToggle("slow")}),o(".footer__menu .has-dropdown").on("click",function(e){e.preventDefault();var t=o(this).find(".sub-menu");t.hasClass("show")?t.removeClass("show"):(t.parent().find(".sub-menu").removeClass("show"),t.toggleClass("show"))})):(o(".footer__menu .has-dropdown").off("click"),o(".footer__menu .has-dropdown").off("click"))}var a,r,s,i;function l(e){e.value.trim()&&(iti.isValidNumber()?(e.parentElement.parentElement.classList.remove("has-error"),e.parentElement.parentElement.classList.add("has-success"),e.parentElement.removeAttribute("id")):(e.parentElement.parentElement.classList.remove("has-success"),e.parentElement.parentElement.classList.add("has-error"),e.parentElement.setAttribute("id","phone-no-success")))}a=document.querySelector(".contact-form"),r=document.querySelector(".first"),s=document.querySelector(".footer"),i=a.getBoundingClientRect(),window.addEventListener("scroll",function(e){var t=r.getBoundingClientRect(),n=s.getBoundingClientRect();t.top+50<0&&0<n.bottom-i.height-130?a.classList.add("fixed-form"):a.classList.remove("fixed-form"),t.top+50&&n.bottom-i.height-610<0?a.classList.add("stop-form"):a.classList.remove("stop-form")}),o(document).ready(function(){var t=document.querySelector("#phone"),e=document.querySelector("#country");window.iti=window.intlTelInput(t,{utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/8.4.6/js/utils.js"}),e.value=iti.getSelectedCountryData().name.replace(/\s*\(.*?\)\s*/g,""),t.addEventListener("countrychange",function(){e.value=iti.getSelectedCountryData().name.replace(/\s*\(.*?\)\s*/g,""),l(t)}),t.addEventListener("input",function(e){l(t)}),o(".mobile-app-guide").length&&(o(".js-thx__link").attr("href","https://www.intellectsoft.net/blog/wp-content/uploads/ebook_How-to-Prepare-for-the-Future-of-Healthcare_-Strategic-Trends-and-Best-Practices.pdf"),o(".js-thx__image").prepend('<img src="https://www.intellectsoft.net/blog/wp-content/uploads/Group.png" alt="">')),n(),o(".main-header").on("click",".main-btn",function(e){e.preventDefault();var t=o(this).attr("href"),n=o(t).offset().top;o("body,html").animate({scrollTop:n},1500)})}),o(window).resize(function(){n()})}(jQuery),window.onload=function(){$.validator.addMethod("englishsonly",function(e,t){return this.optional(t)||/^[a-z ]+$/i.test(e)},"Only latin letters are allowed."),$.validator.addMethod("itivalidnumber",function(e,t){return iti.isValidNumber()},"Invalid number."),$(".contact-form form").each(function(){$(this).validate({errorClass:"has-error",validClass:"has-success",showErrors:function(e){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},highlight:function(e,t,n){var o=$(e);"phone"!==o.attr("name")?o.parent().addClass(t).removeClass(n):o.parent().parent().addClass(t).removeClass(n)},unhighlight:function(e,t,n){$(e).parent().removeClass(t).addClass(n)},rules:{name:{required:!0,maxlength:255,englishsonly:!0},last_name:{englishsonly:!0,required:!0,maxlength:255},phone:{required:!0,itivalidnumber:!0},company:{englishsonly:!0,required:!0,maxlength:255},country:{required:!0},size:{required:!0},position:{englishsonly:!0,required:!0},email:{required:{depends:function(){return $(this).val($.trim($(this).val())),!0}},email:!0,maxlength:255}},messages:{email:{email:"Please use your corporate email",required:!1},phone:!1,country:!1,size:!1,company:!1,last_name:!1,name:!1,position:!1},submitHandler:function(e,t){var n=this;t.preventDefault();var o=new FormData(e),a=new XMLHttpRequest,r={submittedAt:(new Date).getTime(),fields:[{name:"firstname",value:o.get("name")},{name:"lastname",value:o.get("last_name")},{name:"email",value:o.get("email")},{name:"phone",value:o.get("phone")},{name:"company",value:o.get("company")},{name:"jobtitle",value:o.get("position")},{name:"numemployees",value:o.get("size")},{name:"country",value:o.get("country")}],context:{pageUri:"https://www.intellectsoft.net/l/43/future-of-healthcare",pageName:"Ebook: Strategic Trends to Prepare for the Future of Healthcare"}},s=JSON.stringify(r),i=document.querySelector(".contact-form .success");document.querySelector(".webinar-digital .contact-form .form-header");a.open("POST","https://api.hsforms.com/submissions/v3/integration/submit/20037848/4f11ae4e-bac0-46d9-91bb-13c20b698d31"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){4==a.readyState&&200==a.status?(window.dataLayer.push({event:"EbookDownload"}),e.classList.add("hidden"),i.classList.remove("hidden")):4==a.readyState&&400==a.status?(JSON.parse(a.response).errors.forEach(function(e){"INVALID_EMAIL"!=e.errorType&&"BLOCKED_EMAIL"!=e.errorType||n.showErrors({email:"Please use your corporate email"})}),console.log(JSON.parse(a.response).errors)):(4==a.readyState&&403==a.status||4==a.readyState&&404==a.status)&&console.log(JSON.parse(a.response).errors)},a.send(s)}})})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIm9uUmVzaXplIiwid2luZG93Iiwid2lkdGgiLCJvbiIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsInNsaWRlVG9nZ2xlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiJHRoaXMiLCJmaW5kIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInBhcmVudCIsIm9mZiIsImZvcm0iLCJtYWluSGVhZGVyIiwibWFpbkNvbnRlbnQiLCJmb3JtUmVjdCIsInZhbGlkYXRlSW5wdXQiLCJpbnB1dCIsInZhbHVlIiwidHJpbSIsIml0aSIsImlzVmFsaWROdW1iZXIiLCJwYXJlbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1haW5IZWFkZXJSZWN0IiwibWFpbkNvbnRlbnRSZWN0IiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0IiwicmVhZHkiLCJjb3VudHJ5IiwiaW50bFRlbElucHV0IiwidXRpbHNTY3JpcHQiLCJnZXRTZWxlY3RlZENvdW50cnlEYXRhIiwibmFtZSIsInJlcGxhY2UiLCJsZW5ndGgiLCJhdHRyIiwicHJlcGVuZCIsImV2ZW50IiwiaWQiLCJvZmZzZXQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwicmVzaXplIiwialF1ZXJ5Iiwib25sb2FkIiwidmFsaWRhdG9yIiwiYWRkTWV0aG9kIiwiZWxlbWVudCIsIm9wdGlvbmFsIiwidGVzdCIsImVhY2giLCJ2YWxpZGF0ZSIsImVycm9yQ2xhc3MiLCJ2YWxpZENsYXNzIiwic2hvd0Vycm9ycyIsImVycm9yTWFwIiwiTm90aWZ5IiwidXBsb2FkRXJyb3JNZXNzYWdlIiwibm90aWZ5RGVsYXkiLCJkZWZhdWx0U2hvd0Vycm9ycyIsImhpZ2hsaWdodCIsImVsZW0iLCJhZGRDbGFzcyIsInVuaGlnaGxpZ2h0IiwicnVsZXMiLCJyZXF1aXJlZCIsIm1heGxlbmd0aCIsImVuZ2xpc2hzb25seSIsImxhc3RfbmFtZSIsInBob25lIiwiaXRpdmFsaWRudW1iZXIiLCJjb21wYW55Iiwic2l6ZSIsInBvc2l0aW9uIiwiZW1haWwiLCJkZXBlbmRzIiwidmFsIiwibWVzc2FnZXMiLCJzdWJtaXRIYW5kbGVyIiwidHRoaXMiLCJyb3dEYXRhIiwiRm9ybURhdGEiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsImRhdGEiLCJzdWJtaXR0ZWRBdCIsIkRhdGUiLCJnZXRUaW1lIiwiZmllbGRzIiwiZ2V0IiwiY29udGV4dCIsInBhZ2VVcmkiLCJwYWdlTmFtZSIsImZpbmFsX2RhdGEiLCJKU09OIiwic3RyaW5naWZ5Iiwic3VjY2Vzc01lc3NhZ2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJkYXRhTGF5ZXIiLCJwdXNoIiwicGFyc2UiLCJyZXNwb25zZSIsImVycm9ycyIsImZvckVhY2giLCJlbnRyeSIsImVycm9yVHlwZSIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIl0sIm1hcHBpbmdzIjoiY0FHQSxTQUFBQSxHQUVBLFNBQUFDLElBQ0FELEVBQUFFLFFBQUFDLFFBQUEsS0FDQUgsRUFBQSwrQkFBQUksR0FBQSxRQUFBLFdBQ0FKLEVBQUFLLE1BQUFDLFlBQUEsY0FDQU4sRUFBQSw0QkFBQU8sWUFBQSxVQUdBUCxFQUFBLCtCQUFBSSxHQUFBLFFBQUEsU0FBQUksR0FDQUEsRUFBQUMsaUJBRUEsSUFBQUMsRUFBQVYsRUFBQUssTUFBQU0sS0FBQSxhQUVBRCxFQUFBRSxTQUFBLFFBQ0FGLEVBQUFHLFlBQUEsU0FFQUgsRUFBQUksU0FBQUgsS0FBQSxhQUFBRSxZQUFBLFFBQ0FILEVBQUFKLFlBQUEsYUFJQU4sRUFBQSwrQkFBQWUsSUFBQSxTQUNBZixFQUFBLCtCQUFBZSxJQUFBLFVBSUEsSUFDQUMsRUFDQUMsRUFDQUMs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QXpELEtBQUEsZUFDQXhCLE1BQUF3RSxFQUFBUyxJQUFBLFNBQ0EsQ0FDQXpELEtBQUEsVUFDQXhCLE1BQUF3RSxFQUFBUyxJQUFBLGFBRUFDLFFBQUEsQ0FDQUMsUUFBQSwwREFDQUMsU0FBQSxvRUFHQUMsRUFBQUMsS0FBQUMsVUFBQVgsR0FDQVksRUFBQTlFLFNBQUFDLGNBQUEsMEJBQ0FELFNBQUFDLGNBQUEsK0NBQ0ErRCxFQUFBZSxLQUFBLE9BQUEsMkdBRUFmLEVBQUFnQixpQkFBQSxlQUFBLG9CQUNBaEIsRUFBQWlCLG1CQUFBLFdBQ0EsR0FBQWpCLEVBQUFrQixZQUFBLEtBQUFsQixFQUFBbUIsUUFFQWpILE9BQUFrSCxVQUFBQyxLQUFBLENBQUFsRSxNQUFBLGtCQUNBbkMsRUFBQVcsVUFBQUUsSUFBQSxVQUNBaUYsRUFBQW5GLFVBQUFDLE9BQUEsV0FDQSxHQUFBb0UsRUFBQWtCLFlBQUEsS0FBQWxCLEVBQUFtQixRQUNBUCxLQUFBVSxNQUFBdEIsRUFBQXVCLFVBQUFDLE9BQ0FDLFFBQUEsU0FBQUMsR0FDQSxpQkFBQUEsRUFBQUMsV0FBQSxpQkFBQUQsRUFBQUMsV0FDQTlCLEVBQUF6QixXQUFBLENBQUFvQixNQUFBLHNDQUdBb0MsUUFBQUMsSUFBQWpCLEtBQUFVLE1BQUF0QixFQUFBdUIsVUFBQUMsVUFDQSxHQUFBeEIsRUFBQWtCLFlBQUEsS0FBQWxCLEVBQUFtQixRQUVBLEdBQUFuQixFQUFBa0IsWUFBQSxLQUFBbEIsRUFBQW1CLFNBREFTLFFBQUFDLElBQUFqQixLQUFBVSxNQUFBdEIsRUFBQXVCLFVBQUFDLFNBTUF4QixFQUFBOEIsS0FBQW5CIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbjtcbihmdW5jdGlvbiAoJCkge1xuXG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDc2OCkge1xuICAgICAgICAgICAgJCgnLmZvb3Rlcl9fbWVudSAuaGFzLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2Fycm93LWRvd24nKTtcbiAgICAgICAgICAgICAgICAkKCcuYXJyb3ctZG93biAudG9nZ2xlLW1lbnUnKS5zbGlkZVRvZ2dsZSgnc2xvdycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJy5mb290ZXJfX21lbnUgLmhhcy1kcm9wZG93bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKS5maW5kKCcuc3ViLW1lbnUnKTtcblxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnc2hvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucGFyZW50KCkuZmluZCgnLnN1Yi1tZW51JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5mb290ZXJfX21lbnUgLmhhcy1kcm9wZG93bicpLm9mZignY2xpY2snKTtcbiAgICAgICAgICAgICQoJy5mb290ZXJfX21lbnUgLmhhcy1kcm9wZG93bicpLm9mZignY2xpY2snKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwaW5uZWRGb3JtID0gZnVuY3Rpb24gcGlubmVkRm9ybSgpIHtcbiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdC1mb3JtJyk7XG4gICAgICAgIHZhciBtYWluSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpcnN0Jyk7XG4gICAgICAgIHZhciBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXInKTtcbiAgICAgICAgdmFyIGZvcm1SZWN0ID0gZm9ybS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBtYWluSGVhZGVyUmVjdCA9IG1haW5IZWFkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgbWFpbkNvbnRlbnRSZWN0ID0gbWFpbkNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBpZiAobWFpbkhlYWRlclJlY3QudG9wICsgNTAgPCAwICYmIG1haW5Db250ZW50UmVjdC5ib3R0b20gLSBmb3JtUmVjdC5oZWlnaHQgLSAxMzAgPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdmaXhlZC1mb3JtJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQtZm9ybScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1haW5IZWFkZXJSZWN0LnRvcCArIDUwICYmIG1haW5Db250ZW50UmVjdC5ib3R0b20gLSBmb3JtUmVjdC5oZWlnaHQgLSA2MTAgPCAwKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdzdG9wLWZvcm0nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdzdG9wLWZvcm0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHBpbm5lZEZvcm0oKTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG9uZVwiKTtcbiAgICAgICAgdmFyIGNvdW50cnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvdW50cnlcIik7XG4gICAgICAgIHdpbmRvdy5pdGkgPSB3aW5kb3cuaW50bFRlbElucHV0KGlucHV0LCB7XG4gICAgICAgICAgICB1dGlsc1NjcmlwdDogXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9pbnRsLXRlbC1pbnB1dC84LjQuNi9qcy91dGlscy5qc1wiXG4gICAgICAgIH0pO1xuICAgICAgICBjb3VudHJ5LnZhbHVlID0gaXRpLmdldFNlbGVjdGVkQ291bnRyeURhdGEoKS5uYW1lLnJlcGxhY2UoL1xccypcXCguKj9cXClcXHMqL2csICcnKTtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNvdW50cnljaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY291bnRyeS52YWx1ZSA9IGl0aS5nZXRTZWxlY3RlZENvdW50cnlEYXRhKCkubmFtZS5yZXBsYWNlKC9cXHMqXFwoLio/XFwpXFxzKi9nLCAnJyk7XG4gICAgICAgICAgICB2YWxpZGF0ZUlucHV0KGlucHV0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlSW5wdXQoaW5wdXQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJCgnLm1vYmlsZS1hcHAtZ3VpZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICQoJy5qcy10aHhfX2xpbmsnKS5hdHRyKFwiaHJlZlwiLCBcImh0dHBzOi8vd3d3LmludGVsbGVjdHNvZnQubmV0L2Jsb2cvd3AtY29udGVudC91cGxvYWRzL2Vib29rX0hvdy10by1QcmVwYXJlLWZvci10aGUtRnV0dXJlLW9mLUhlYWx0aGNhcmVfLVN0cmF0ZWdpYy1UcmVuZHMtYW5kLUJlc3QtUHJhY3RpY2VzLnBkZlwiKTtcbiAgICAgICAgICAgICQoJy5qcy10aHhfX2ltYWdlJykucHJlcGVuZCgnPGltZyBzcmM9XCJodHRwczovL3d3dy5pbnRlbGxlY3Rzb2Z0Lm5ldC9ibG9nL3dwLWNvbnRlbnQvdXBsb2Fkcy9Hcm91cC5wbmdcIiBhbHQ9XCJcIj4nKTtcbiAgICAgICAgfVxuICAgICAgICBvblJlc2l6ZSgpO1xuICAgICAgICAkKFwiLm1haW4taGVhZGVyXCIpLm9uKFwiY2xpY2tcIiwgXCIubWFpbi1idG5cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgdG9wID0gJChpZCkub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgJCgnYm9keSxodG1sJykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogdG9wIH0sIDE1MDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgaWYgKGl0aS5pc1ZhbGlkTnVtYmVyKCkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhhcy1lcnJvclwiKTtcbiAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhhcy1zdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhhcy1zdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGFzLWVycm9yXCIpO1xuICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICdwaG9uZS1uby1zdWNjZXNzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25SZXNpemUoKTtcbiAgICB9KTtcbn0pKGpRdWVyeSk7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZW5nbGlzaHNvbmx5XCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlthLXogXSskL2kudGVzdCh2YWx1ZSk7XG4gICAgfSwgXCJPbmx5IGxhdGluIGxldHRlcnMgYXJlIGFsbG93ZWQuXCIpO1xuXG4gICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiaXRpdmFsaWRudW1iZXJcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBpdGkuaXNWYWxpZE51bWJlcigpO1xuICAgIH0sIFwiSW52YWxpZCBudW1iZXIuXCIpO1xuXG4gICAgJCgnLmNvbnRhY3QtZm9ybSBmb3JtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudmFsaWRhdGUoe1xuICAgICAgICAgICAgZXJyb3JDbGFzczogJ2hhcy1lcnJvcicsXG4gICAgICAgICAgICB2YWxpZENsYXNzOiAnaGFzLXN1Y2Nlc3MnLFxuICAgICAgICAgICAgc2hvd0Vycm9yczogZnVuY3Rpb24gc2hvd0Vycm9ycyhlcnJvck1hcCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvck1hcFsnYXR0YWNoJ10pIE5vdGlmeSh1cGxvYWRFcnJvck1lc3NhZ2UsIG5vdGlmeURlbGF5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRTaG93RXJyb3JzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQoZWxlbSwgZXJyb3JDbGFzcywgdmFsaWRDbGFzcykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJChlbGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5hdHRyKCduYW1lJykgPT09ICdwaG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcyhlcnJvckNsYXNzKS5yZW1vdmVDbGFzcyh2YWxpZENsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmFkZENsYXNzKGVycm9yQ2xhc3MpLnJlbW92ZUNsYXNzKHZhbGlkQ2xhc3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiB1bmhpZ2hsaWdodChlbGVtLCBlcnJvckNsYXNzLCB2YWxpZENsYXNzKSB7XG4gICAgICAgICAgICAgICAgJChlbGVtKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhlcnJvckNsYXNzKS5hZGRDbGFzcyh2YWxpZENsYXNzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMjU1LFxuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoc29ubHk6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZToge1xuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoc29ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGhvbmU6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGl0aXZhbGlkbnVtYmVyOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wYW55OiB7XG4gICAgICAgICAgICAgICAgICAgIGVuZ2xpc2hzb25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmdsaXNoc29ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwZW5kczogZnVuY3Rpb24gZGVwZW5kcygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgkLnRyaW0oJCh0aGlzKS52YWwoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJ1BsZWFzZSB1c2UgeW91ciBjb3Jwb3JhdGUgZW1haWwnLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBob25lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzaXplOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb21wYW55OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsYXN0X25hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoZm9ybSwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHRoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0RhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgcmVxdWVzdFxuICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAvLyBFeGFtcGxlIHJlcXVlc3QgSlNPTjpcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJtaXR0ZWRBdFwiOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgXCJmaWVsZHNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZpcnN0bmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnbmFtZScpXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImxhc3RuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHJvd0RhdGEuZ2V0KCdsYXN0X25hbWUnKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnZW1haWwnKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwaG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgncGhvbmUnKVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJjb21wYW55XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHJvd0RhdGEuZ2V0KCdjb21wYW55JylcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiam9idGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogcm93RGF0YS5nZXQoJ3Bvc2l0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibnVtZW1wbG95ZWVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHJvd0RhdGEuZ2V0KCdzaXplJylcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY291bnRyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiByb3dEYXRhLmdldCgnY291bnRyeScpXG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICAgICBcImNvbnRleHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJwYWdlVXJpXCI6IFwiaHR0cHM6Ly93d3cuaW50ZWxsZWN0c29mdC5uZXQvbC80My9mdXR1cmUtb2YtaGVhbHRoY2FyZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwYWdlTmFtZVwiOiBcIkVib29rOiBTdHJhdGVnaWMgVHJlbmRzIHRvIFByZXBhcmUgZm9yIHRoZSBGdXR1cmUgb2YgSGVhbHRoY2FyZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBmaW5hbF9kYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3QtZm9ybSAuc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWJpbmFyLWRpZ2l0YWwgLmNvbnRhY3QtZm9ybSAuZm9ybS1oZWFkZXInKTtcbiAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL2FwaS5oc2Zvcm1zLmNvbS9zdWJtaXNzaW9ucy92My9pbnRlZ3JhdGlvbi9zdWJtaXQvMjAwMzc4NDgvNGYxMWFlNGUtYmFjMC00NmQ5LTkxYmItMTNjMjBiNjk4ZDMxJyk7XG4gICAgICAgICAgICAgICAgLy8gU2V0cyB0aGUgdmFsdWUgb2YgdGhlICdDb250ZW50LVR5cGUnIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHRvICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmIHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm5zIGEgMjAwIHJlc3BvbnNlIGlmIHRoZSBzdWJtaXNzaW9uIGlzIHN1Y2Nlc3NmdWwuXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goeyAnZXZlbnQnOiAnRWJvb2tEb3dubG9hZCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9ycyA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKS5lcnJvcnM7IC8vIFJldHVybnMgYSA0MDAgZXJyb3IgdGhlIHN1Ym1pc3Npb24gaXMgcmVqZWN0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZXJyb3JUeXBlID09IFwiSU5WQUxJRF9FTUFJTFwiIHx8IGVudHJ5LmVycm9yVHlwZSA9PSBcIkJMT0NLRURfRU1BSUxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dGhpcy5zaG93RXJyb3JzKHsgJ2VtYWlsJzogJ1BsZWFzZSB1c2UgeW91ciBjb3Jwb3JhdGUgZW1haWwnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpLmVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpLmVycm9ycyk7IC8vIFJldHVybnMgYSA0MDMgZXJyb3IgaWYgdGhlIHBvcnRhbCBpc24ndCBhbGxvd2VkIHRvIHBvc3Qgc3VibWlzc2lvbnMuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDQwNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpLmVycm9ycyk7IC8vUmV0dXJucyBhIDQwNCBlcnJvciBpZiB0aGUgZm9ybUd1aWQgaXNuJ3QgZm91bmRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gU2VuZHMgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChmaW5hbF9kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59OyJdfQ==
